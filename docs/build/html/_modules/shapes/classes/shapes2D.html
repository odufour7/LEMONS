

<!DOCTYPE html>
<html class="writer-html5" lang="english" data-content_root="../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>shapes.classes.shapes2D &mdash; shapes project 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />

  
      <script src="../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../_static/documentation_options.js?v=14667faf"></script>
      <script src="../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../index.html" class="icon icon-home">
            shapes project
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/shapes/create2Dped.html">Create a 2D pedestrian</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/shapes/create3Dped.html">Create a 3D pedestrian</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/shapes/read_database.html">Read the ANSURII database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modules.html">src</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">shapes project</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Module code</a></li>
      <li class="breadcrumb-item active">shapes.classes.shapes2D</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for shapes.classes.shapes2D</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Class to store body shapes dynamically based on agent type.&quot;&quot;&quot;</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span><span class="p">,</span> <span class="n">field</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">numpy.typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">NDArray</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.optimize</span><span class="w"> </span><span class="kn">import</span> <span class="n">dual_annealing</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely.affinity</span><span class="w"> </span><span class="kn">import</span> <span class="n">scale</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely.geometry</span><span class="w"> </span><span class="kn">import</span> <span class="n">Point</span><span class="p">,</span> <span class="n">Polygon</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapely.ops</span><span class="w"> </span><span class="kn">import</span> <span class="n">unary_union</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">shapes.utils.constants</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">cst</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapes.classes.initial_agents</span><span class="w"> </span><span class="kn">import</span> <span class="n">InitialBike</span><span class="p">,</span> <span class="n">InitialPedestrian</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapes.classes.measures</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgentMeasures</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">shapes.utils.typing_custom</span><span class="w"> </span><span class="kn">import</span> <span class="n">ShapeDataType</span>


<div class="viewcode-block" id="Shapes2D">
<a class="viewcode-back" href="../../../shapes.classes.html#shapes.classes.shapes2D.Shapes2D">[docs]</a>
<span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Shapes2D</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class to store body shapes dynamically based on agent type.</span>

<span class="sd">    This class allows you to manage shapes in two ways:</span>
<span class="sd">    1. Provide a dictionary of pre-defined Shapely shapes as input.</span>
<span class="sd">    2. Specify the type of shape and its characteristics to create it dynamically.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">agent_type</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">AgentTypes</span>
    <span class="n">shapes</span><span class="p">:</span> <span class="n">ShapeDataType</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate the provided shapes and agent type after initialization.</span>

<span class="sd">        This method is automatically called after the object is initialized. It performs</span>
<span class="sd">        various checks to ensure the validity of the object&#39;s attributes.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the agent type is not one of the allowed values defined in `AgentType`.</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the `shapes` attribute is not a dictionary.</span>
<span class="sd">        ValueError</span>
<span class="sd">            If any shape in the `shapes` dictionary is not a valid Shapely object (Point or Polygon).</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the reference direction is not within the range (-180.0, 180.0].</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Validate the provided agent type</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agent_type</span><span class="p">,</span> <span class="n">cst</span><span class="o">.</span><span class="n">AgentTypes</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Agent type should be one of: </span><span class="si">{</span><span class="p">[</span><span class="n">member</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">member</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">cst</span><span class="o">.</span><span class="n">AgentTypes</span><span class="p">]</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

        <span class="c1"># Validate the provided shapes</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shapes</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;shapes should be a dictionary.&quot;</span><span class="p">)</span>

        <span class="c1"># Validate that the provided shapes are valid Shapely objects</span>
        <span class="k">for</span> <span class="n">shape_name</span><span class="p">,</span> <span class="n">shape</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shapes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;object&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">Point</span><span class="p">,</span> <span class="n">Polygon</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Invalid shape type for &#39;</span><span class="si">{</span><span class="n">shape_name</span><span class="si">}</span><span class="s2">&#39;: </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;object&#39;</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="Shapes2D.create_shape">
<a class="viewcode-back" href="../../../shapes.classes.html#shapes.classes.shapes2D.Shapes2D.create_shape">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">shape_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">young_modulus</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create a shape and add it to the shapes dictionary.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str</span>
<span class="sd">            The name of the shape.</span>
<span class="sd">        shape_type : str</span>
<span class="sd">            The type of the shape. Must be one of {&#39;circle&#39;, &#39;rectangle&#39;, &#39;polygon&#39;}.</span>
<span class="sd">        young_modulus : float</span>
<span class="sd">            The Young&#39;s modulus of the shape.</span>
<span class="sd">        kwargs : Any</span>
<span class="sd">            Additional keyword arguments specific to the shape type.</span>

<span class="sd">        Keyword Arguments</span>
<span class="sd">        -----------------</span>
<span class="sd">        For &#39;circle&#39;:</span>
<span class="sd">            center : tuple of (float, float)</span>
<span class="sd">                The center of the circle.</span>
<span class="sd">            radius : float</span>
<span class="sd">                The radius of the circle.</span>
<span class="sd">        For &#39;rectangle&#39;:</span>
<span class="sd">            min_x : float</span>
<span class="sd">                The minimum x-coordinate of the rectangle.</span>
<span class="sd">            min_y : float</span>
<span class="sd">                The minimum y-coordinate of the rectangle.</span>
<span class="sd">            max_x : float</span>
<span class="sd">                The maximum x-coordinate of the rectangle.</span>
<span class="sd">            max_y : float</span>
<span class="sd">                The maximum y-coordinate of the rectangle.</span>
<span class="sd">        For &#39;polygon&#39;:</span>
<span class="sd">            points : list of tuple of (float, float)</span>
<span class="sd">                The vertices of the polygon. Must have at least 3 points, and the first and last points must match.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the shape type is unsupported or if the required keyword arguments are not provided or invalid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">shape_type</span> <span class="o">==</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">circle</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">center</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;center&quot;</span><span class="p">)</span>
            <span class="n">radius</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;radius&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">center</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;For a circle, &#39;center&#39; must be a tuple and &#39;radius&#39; must be a number.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shapes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">circle</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span> <span class="n">young_modulus</span><span class="p">,</span>
                <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">Point</span><span class="p">(</span><span class="n">center</span><span class="p">)</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">radius</span><span class="p">),</span>
            <span class="p">}</span>

        <span class="k">elif</span> <span class="n">shape_type</span> <span class="o">==</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">rectangle</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">min_x</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;min_x&quot;</span><span class="p">)</span>
            <span class="n">min_y</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;min_y&quot;</span><span class="p">)</span>
            <span class="n">max_x</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_x&quot;</span><span class="p">)</span>
            <span class="n">max_y</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;max_y&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">coord</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">))</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <span class="p">[</span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span><span class="p">]):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;For a rectangle, &#39;min_x&#39;, &#39;min_y&#39;, &#39;max_x&#39;, and &#39;max_y&#39; must be numbers.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shapes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">rectangle</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span> <span class="n">young_modulus</span><span class="p">,</span>
                <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">Polygon</span><span class="p">([(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">),</span> <span class="p">(</span><span class="n">min_x</span><span class="p">,</span> <span class="n">max_y</span><span class="p">),</span> <span class="p">(</span><span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span><span class="p">),</span> <span class="p">(</span><span class="n">max_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">)]),</span>
            <span class="p">}</span>

        <span class="k">elif</span> <span class="n">shape_type</span> <span class="o">==</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">points</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;points&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;For a polygon, &#39;points&#39; must be a list of tuples.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="n">points</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;A polygon must have at least 3 points and the first/last points must match.&quot;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">shapes</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span> <span class="n">young_modulus</span><span class="p">,</span>
                <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">Polygon</span><span class="p">(</span><span class="n">points</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unsupported shape type: </span><span class="si">{</span><span class="n">shape_type</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="Shapes2D.get_shape">
<a class="viewcode-back" href="../../../shapes.classes.html#shapes.classes.shapes2D.Shapes2D.get_shape">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Polygon</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve a shape by its name.</span>

<span class="sd">        This method returns the Shapely Polygon object associated with the given shape name.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str</span>
<span class="sd">            The name of the shape to retrieve.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Polygon</span>
<span class="sd">            The Shapely Polygon object corresponding to the shape with the given name.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shapes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;No shape found with name &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">shapes</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;object&quot;</span><span class="p">]</span></div>


<div class="viewcode-block" id="Shapes2D.get_additional_parameters">
<a class="viewcode-back" href="../../../shapes.classes.html#shapes.classes.shapes2D.Shapes2D.get_additional_parameters">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_additional_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ShapeDataType</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Retrieve parameters of each stored shape.</span>

<span class="sd">        This method iterates through all stored shapes and extracts relevant</span>
<span class="sd">        parameters based on the shape type (circle, rectangle, or polygon).</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        ShapeDataType</span>
<span class="sd">            A dictionary containing the parameters of each shape. The keys are</span>
<span class="sd">            the shape names, and the values are dictionaries with the following</span>
<span class="sd">            structure:</span>

<span class="sd">            - For circles:</span>
<span class="sd">                - &#39;shape_type&#39;: str</span>
<span class="sd">                    The type of the shape (always &#39;circle&#39;).</span>
<span class="sd">                - &#39;young_modulus&#39;: float</span>
<span class="sd">                    The Young&#39;s modulus of the material.</span>
<span class="sd">                - &#39;center&#39;: tuple of float</span>
<span class="sd">                    The (x, y) coordinates of the circle&#39;s center.</span>
<span class="sd">                - &#39;radius&#39;: float</span>
<span class="sd">                    The radius of the circle.</span>

<span class="sd">            - For rectangles:</span>
<span class="sd">                - &#39;shape_type&#39;: str</span>
<span class="sd">                    The type of the shape (always &#39;rectangle&#39;).</span>
<span class="sd">                - &#39;young_modulus&#39;: float</span>
<span class="sd">                    The Young&#39;s modulus of the material.</span>
<span class="sd">                - &#39;min_x&#39;, &#39;min_y&#39;, &#39;max_x&#39;, &#39;max_y&#39;: float</span>
<span class="sd">                    The coordinates of the rectangle&#39;s bounding box.</span>

<span class="sd">            - For polygons:</span>
<span class="sd">                - &#39;shape_type&#39;: str</span>
<span class="sd">                    The type of the shape (always &#39;polygon&#39;).</span>
<span class="sd">                - &#39;young_modulus&#39;: float</span>
<span class="sd">                    The Young&#39;s modulus of the material.</span>
<span class="sd">                - &#39;points&#39;: list of tuples</span>
<span class="sd">                    A list of (x, y) coordinates representing the polygon&#39;s vertices.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Create a dictionary to store the parameters of each shape</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">shape</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shapes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># Retrieve the parameters of each shape according to its type</span>
            <span class="k">if</span> <span class="n">shape</span><span class="p">[</span><span class="s2">&quot;shape_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">circle</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                <span class="n">disk</span><span class="p">:</span> <span class="n">Polygon</span> <span class="o">=</span> <span class="n">shape</span><span class="p">[</span><span class="s2">&quot;object&quot;</span><span class="p">]</span>
                <span class="n">disk_center</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">centroid</span>
                <span class="n">disk_radius</span> <span class="o">=</span> <span class="n">disk</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">disk</span><span class="o">.</span><span class="n">centroid</span><span class="p">)</span>
                <span class="n">params</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">circle</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span> <span class="n">shape</span><span class="p">[</span><span class="s2">&quot;young_modulus&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;center&quot;</span><span class="p">:</span> <span class="p">(</span><span class="n">disk_center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">disk_center</span><span class="o">.</span><span class="n">y</span><span class="p">),</span>
                    <span class="s2">&quot;radius&quot;</span><span class="p">:</span> <span class="n">disk_radius</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="k">elif</span> <span class="n">shape</span><span class="p">[</span><span class="s2">&quot;shape_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">rectangle</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                <span class="n">rect</span><span class="p">:</span> <span class="n">Polygon</span> <span class="o">=</span> <span class="n">shape</span><span class="p">[</span><span class="s2">&quot;object&quot;</span><span class="p">]</span>
                <span class="n">min_x</span><span class="p">,</span> <span class="n">min_y</span><span class="p">,</span> <span class="n">max_x</span><span class="p">,</span> <span class="n">max_y</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">bounds</span>
                <span class="n">params</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">rectangle</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span> <span class="n">shape</span><span class="p">[</span><span class="s2">&quot;young_modulus&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;min_x&quot;</span><span class="p">:</span> <span class="n">min_x</span><span class="p">,</span>
                    <span class="s2">&quot;min_y&quot;</span><span class="p">:</span> <span class="n">min_y</span><span class="p">,</span>
                    <span class="s2">&quot;max_x&quot;</span><span class="p">:</span> <span class="n">max_x</span><span class="p">,</span>
                    <span class="s2">&quot;max_y&quot;</span><span class="p">:</span> <span class="n">max_y</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="k">elif</span> <span class="n">shape</span><span class="p">[</span><span class="s2">&quot;shape_type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                <span class="n">poly</span><span class="p">:</span> <span class="n">Polygon</span> <span class="o">=</span> <span class="n">shape</span><span class="p">[</span><span class="s2">&quot;object&quot;</span><span class="p">]</span>
                <span class="n">poly_points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">exterior</span><span class="o">.</span><span class="n">coords</span><span class="p">)</span>
                <span class="n">params</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">polygon</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span> <span class="n">shape</span><span class="p">[</span><span class="s2">&quot;young_modulus&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;points&quot;</span><span class="p">:</span> <span class="n">poly_points</span><span class="p">,</span>
                <span class="p">}</span>

        <span class="k">return</span> <span class="n">params</span></div>


<div class="viewcode-block" id="Shapes2D.number_of_shapes">
<a class="viewcode-back" href="../../../shapes.classes.html#shapes.classes.shapes2D.Shapes2D.number_of_shapes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">number_of_shapes</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the total number of stored shapes.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        int</span>
<span class="sd">            The total number of shapes stored in the `shapes` attribute.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shapes</span><span class="p">)</span></div>


<div class="viewcode-block" id="Shapes2D.create_pedestrian_shapes">
<a class="viewcode-back" href="../../../shapes.classes.html#shapes.classes.shapes2D.Shapes2D.create_pedestrian_shapes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_pedestrian_shapes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">measurements</span><span class="p">:</span> <span class="n">AgentMeasures</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create the shapes of a pedestrian based on the provided measures.</span>

<span class="sd">        This method generates the shapes of a pedestrian agent by scaling initial disk centers and radii</span>
<span class="sd">        according to the provided measurements. It uses an optimization algorithm to minimize the difference</span>
<span class="sd">        between the ndesired and actual chest depth and bideltoid breadth.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        measurements : AgentMeasures</span>
<span class="sd">            An object containing the measurements of the pedestrian agent.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the agent type is not &#39;pedestrian&#39;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Validate the agent type</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent_type</span> <span class="o">!=</span> <span class="n">cst</span><span class="o">.</span><span class="n">AgentTypes</span><span class="o">.</span><span class="n">pedestrian</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;create_pedestrian_shapes() can only create pedestrian agents.&quot;</span><span class="p">)</span>

        <span class="c1"># Scale the initial pedestrian shapes to match the provided measurements</span>
        <span class="n">sex_name</span> <span class="o">=</span> <span class="n">measurements</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="n">cst</span><span class="o">.</span><span class="n">PedestrianParts</span><span class="o">.</span><span class="n">sex</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="n">homothety_center</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sex_name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">sex_name</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;male&quot;</span><span class="p">,</span> <span class="s2">&quot;female&quot;</span><span class="p">]:</span>
            <span class="n">initial_pedestrian</span> <span class="o">=</span> <span class="n">InitialPedestrian</span><span class="p">(</span><span class="n">sex_name</span><span class="p">)</span>
            <span class="n">homothety_center</span> <span class="o">=</span> <span class="n">initial_pedestrian</span><span class="o">.</span><span class="n">calculate_position</span><span class="p">()</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">objectif_fun</span><span class="p">(</span><span class="n">scaling_factor</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Objective function to minimize the difference between the desired and actual pedestrian dimensions.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            scaling_factor : NDArray[np.float64]</span>
<span class="sd">                A 1D numpy array of length 2 containing scaling factors:</span>
<span class="sd">                - scaling_factor[0]: x-axis scaling factor</span>
<span class="sd">                - scaling_factor[1]: y-axis scaling factor</span>

<span class="sd">            Returns</span>
<span class="sd">            -------</span>
<span class="sd">            float</span>
<span class="sd">                The penalty value representing the sum of squared differences between the desired and actual dimensions.</span>

<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># Retrieve the wanted measurements from the provided measures</span>
            <span class="n">wanted_chest_depth</span> <span class="o">=</span> <span class="n">measurements</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="n">cst</span><span class="o">.</span><span class="n">PedestrianParts</span><span class="o">.</span><span class="n">chest_depth</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
            <span class="n">wanted_bideltoid_breadth</span> <span class="o">=</span> <span class="n">measurements</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="n">cst</span><span class="o">.</span><span class="n">PedestrianParts</span><span class="o">.</span><span class="n">bideltoid_breadth</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

            <span class="c1"># Calculate the new measurements based on the scaling factors</span>
            <span class="n">scale_factor_x</span><span class="p">,</span> <span class="n">scale_factor_y</span> <span class="o">=</span> <span class="n">scaling_factor</span>
            <span class="n">adjusted_centers</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">scale</span><span class="p">(</span><span class="n">disk_center</span><span class="p">,</span> <span class="n">xfact</span><span class="o">=</span><span class="n">scale_factor_x</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="n">homothety_center</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">disk_center</span> <span class="ow">in</span> <span class="n">initial_pedestrian</span><span class="o">.</span><span class="n">get_disk_centers</span><span class="p">()</span>
            <span class="p">]</span>
            <span class="n">adjusted_radii</span> <span class="o">=</span> <span class="p">[</span><span class="n">disk_radius</span> <span class="o">*</span> <span class="n">scale_factor_y</span> <span class="k">for</span> <span class="n">disk_radius</span> <span class="ow">in</span> <span class="n">initial_pedestrian</span><span class="o">.</span><span class="n">get_disk_radii</span><span class="p">()]</span>
            <span class="n">current_chest_depth</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">adjusted_radii</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">current_bideltoid_breadth</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">adjusted_centers</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="mf">2.0</span> <span class="o">*</span> <span class="n">adjusted_radii</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span>

            <span class="c1"># Calculate the penalty based on the difference between the new and old measurements</span>
            <span class="n">penalty_chest</span> <span class="o">=</span> <span class="p">(</span><span class="n">current_chest_depth</span> <span class="o">-</span> <span class="n">wanted_chest_depth</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="n">penalty_shoulder_breadth</span> <span class="o">=</span> <span class="p">(</span><span class="n">current_bideltoid_breadth</span> <span class="o">-</span> <span class="n">wanted_bideltoid_breadth</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>

            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">penalty_chest</span> <span class="o">+</span> <span class="n">penalty_shoulder_breadth</span><span class="p">)</span>

        <span class="c1"># Optimize the scaling factors to minimize the penalty</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1e-5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1e-5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]])</span>
        <span class="n">guess_parameters</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">])</span>
        <span class="n">optimized_scaling</span> <span class="o">=</span> <span class="n">dual_annealing</span><span class="p">(</span>
            <span class="n">objectif_fun</span><span class="p">,</span>
            <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span>
            <span class="n">maxiter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
            <span class="n">x0</span><span class="o">=</span><span class="n">guess_parameters</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">optimized_scale_factor_x</span><span class="p">,</span> <span class="n">optimized_scale_factor_y</span> <span class="o">=</span> <span class="n">optimized_scaling</span><span class="o">.</span><span class="n">x</span>

        <span class="c1"># Adjust the initial pedestrian shapes based on the optimized scaling factors</span>
        <span class="n">adjusted_centers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">scale</span><span class="p">(</span><span class="n">disk_center</span><span class="p">,</span> <span class="n">xfact</span><span class="o">=</span><span class="n">optimized_scale_factor_x</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="n">homothety_center</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">disk_center</span> <span class="ow">in</span> <span class="n">initial_pedestrian</span><span class="o">.</span><span class="n">get_disk_centers</span><span class="p">()</span>
        <span class="p">]</span>
        <span class="n">adjusted_radii</span> <span class="o">=</span> <span class="p">[</span><span class="n">disk_radius</span> <span class="o">*</span> <span class="n">optimized_scale_factor_y</span> <span class="k">for</span> <span class="n">disk_radius</span> <span class="ow">in</span> <span class="n">initial_pedestrian</span><span class="o">.</span><span class="n">get_disk_radii</span><span class="p">()]</span>

        <span class="c1"># Create the adjusted shapes for the pedestrian</span>
        <span class="n">disks</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;center&quot;</span><span class="p">:</span> <span class="n">center</span><span class="p">,</span> <span class="s2">&quot;radius&quot;</span><span class="p">:</span> <span class="n">radius</span><span class="p">}</span> <span class="k">for</span> <span class="n">center</span><span class="p">,</span> <span class="n">radius</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">adjusted_centers</span><span class="p">,</span> <span class="n">adjusted_radii</span><span class="p">,</span> <span class="n">strict</span><span class="o">=</span><span class="kc">False</span><span class="p">)]</span>
        <span class="n">adjusted_shapes</span> <span class="o">=</span> <span class="p">{</span>
            <span class="sa">f</span><span class="s2">&quot;disk</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">circle</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">YOUNG_MODULUS_DISK_INIT</span><span class="p">,</span>
                <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">Point</span><span class="p">(</span><span class="n">disk</span><span class="p">[</span><span class="s2">&quot;center&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">buffer</span><span class="p">(</span><span class="n">disk</span><span class="p">[</span><span class="s2">&quot;radius&quot;</span><span class="p">]),</span>
            <span class="p">}</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">disk</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">disks</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">shapes</span> <span class="o">=</span> <span class="n">adjusted_shapes</span></div>


<div class="viewcode-block" id="Shapes2D.create_bike_shapes">
<a class="viewcode-back" href="../../../shapes.classes.html#shapes.classes.shapes2D.Shapes2D.create_bike_shapes">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">create_bike_shapes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">measurements</span><span class="p">:</span> <span class="n">AgentMeasures</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Create and scale 2D shapes for a bike and its rider based on provided measurements.</span>

<span class="sd">        This method uses an optimization process to generate bike and rider shapes that</span>
<span class="sd">        best match the provided measurements. It scales initial shapes to minimize the</span>
<span class="sd">        difference between desired and actual dimensions.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        measurements : AgentMeasures</span>
<span class="sd">            An object containing the target measurements for various bike parts and</span>
<span class="sd">            rider dimensions.</span>

<span class="sd">        Raises</span>
<span class="sd">        ------</span>
<span class="sd">        ValueError</span>
<span class="sd">            If the agent type is not &#39;bike&#39;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Validate the agent type</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent_type</span> <span class="o">!=</span> <span class="n">cst</span><span class="o">.</span><span class="n">AgentTypes</span><span class="o">.</span><span class="n">bike</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;create_bike_shapes() can only create bike agents.&quot;</span><span class="p">)</span>

        <span class="c1"># Scale the initial bike shapes to match the provided measurements</span>
        <span class="n">init_bike</span> <span class="o">=</span> <span class="n">InitialBike</span><span class="p">()</span>

        <span class="k">def</span><span class="w"> </span><span class="nf">objective_fun</span><span class="p">(</span><span class="n">scaling_factor</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Objective function to minimize the difference between the desired and actual bike/rider dimensions.</span>

<span class="sd">            Parameters</span>
<span class="sd">            ----------</span>
<span class="sd">            scaling_factor : NDArray[np.float64]</span>
<span class="sd">                An array containing the scaling factors for the bike and rider dimensions in the order</span>
<span class="sd">                [scale_bike_factor_x,</span>
<span class="sd">                scale_bike_factor_y,</span>
<span class="sd">                scale_rider_factor_x,</span>
<span class="sd">                scale_rider_factor_y].</span>

<span class="sd">            Returns</span>
<span class="sd">            -------</span>
<span class="sd">            float</span>
<span class="sd">                The penalty value representing the sum of squared differences between the desired and actual dimensions.</span>

<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># Unpack the scaling factors</span>
            <span class="p">(</span>
                <span class="n">scale_bike_factor_x</span><span class="p">,</span>
                <span class="n">scale_bike_factor_y</span><span class="p">,</span>
                <span class="n">scale_rider_factor_x</span><span class="p">,</span>
                <span class="n">scale_rider_factor_y</span><span class="p">,</span>
            <span class="p">)</span> <span class="o">=</span> <span class="n">scaling_factor</span>

            <span class="c1"># Retrieve the wanted measurements from the provided measures</span>
            <span class="n">wanted_rider_width</span> <span class="o">=</span> <span class="n">measurements</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="n">cst</span><span class="o">.</span><span class="n">BikeParts</span><span class="o">.</span><span class="n">handlebar_length</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
            <span class="n">wanted_rider_length</span> <span class="o">=</span> <span class="n">measurements</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="n">cst</span><span class="o">.</span><span class="n">BikeParts</span><span class="o">.</span><span class="n">top_tube_length</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
            <span class="n">wanted_bike_width</span> <span class="o">=</span> <span class="n">measurements</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="n">cst</span><span class="o">.</span><span class="n">BikeParts</span><span class="o">.</span><span class="n">wheel_width</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
            <span class="n">wanted_bike_length</span> <span class="o">=</span> <span class="n">measurements</span><span class="o">.</span><span class="n">measures</span><span class="p">[</span><span class="n">cst</span><span class="o">.</span><span class="n">BikeParts</span><span class="o">.</span><span class="n">total_length</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>

            <span class="c1"># Calculate the new measurements based on the scaling factors</span>
            <span class="n">new_shapes</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;bike&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">rectangle</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">YOUNG_MODULUS_RECTANGLE_INIT</span><span class="p">,</span>
                    <span class="s2">&quot;min_x&quot;</span><span class="p">:</span> <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;min_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_bike_factor_x</span><span class="p">,</span>
                    <span class="s2">&quot;min_y&quot;</span><span class="p">:</span> <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;min_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_bike_factor_y</span><span class="p">,</span>
                    <span class="s2">&quot;max_x&quot;</span><span class="p">:</span> <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;max_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_bike_factor_x</span><span class="p">,</span>
                    <span class="s2">&quot;max_y&quot;</span><span class="p">:</span> <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;max_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_bike_factor_y</span><span class="p">,</span>
                <span class="p">},</span>
                <span class="s2">&quot;rider&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">rectangle</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">YOUNG_MODULUS_RECTANGLE_INIT</span><span class="p">,</span>
                    <span class="s2">&quot;min_x&quot;</span><span class="p">:</span> <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;min_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_rider_factor_x</span><span class="p">,</span>
                    <span class="s2">&quot;min_y&quot;</span><span class="p">:</span> <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;min_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_rider_factor_y</span><span class="p">,</span>
                    <span class="s2">&quot;max_x&quot;</span><span class="p">:</span> <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;max_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_rider_factor_x</span><span class="p">,</span>
                    <span class="s2">&quot;max_y&quot;</span><span class="p">:</span> <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;max_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">scale_rider_factor_y</span><span class="p">,</span>
                <span class="p">},</span>
            <span class="p">}</span>
            <span class="n">current_bike_length</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">new_shapes</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;max_y&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_shapes</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;min_y&quot;</span><span class="p">])</span>
            <span class="n">current_rider_width</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">new_shapes</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;max_x&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_shapes</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;min_x&quot;</span><span class="p">])</span>
            <span class="n">current_rider_length</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">new_shapes</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;max_y&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_shapes</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;min_y&quot;</span><span class="p">])</span>
            <span class="n">current_bike_width</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">new_shapes</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;max_x&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="n">new_shapes</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;min_x&quot;</span><span class="p">])</span>

            <span class="c1"># Calculate the penalty based on the difference between the current and wanted measurements</span>
            <span class="n">penalty_rider_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">wanted_rider_width</span> <span class="o">-</span> <span class="n">current_rider_width</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="n">penalty_rider_length</span> <span class="o">=</span> <span class="p">(</span><span class="n">wanted_rider_length</span> <span class="o">-</span> <span class="n">current_rider_length</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="n">penalty_bike_width</span> <span class="o">=</span> <span class="p">(</span><span class="n">wanted_bike_width</span> <span class="o">-</span> <span class="n">current_bike_width</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>
            <span class="n">penalty_bike_length</span> <span class="o">=</span> <span class="p">(</span><span class="n">wanted_bike_length</span> <span class="o">-</span> <span class="n">current_bike_length</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span>

            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">penalty_rider_length</span> <span class="o">+</span> <span class="n">penalty_bike_width</span> <span class="o">+</span> <span class="n">penalty_bike_length</span> <span class="o">+</span> <span class="n">penalty_rider_width</span><span class="p">)</span>

        <span class="c1"># Optimize the scaling factors to minimize the penalty</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">1e-5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1e-5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1e-5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1e-5</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]])</span>
        <span class="n">guess_parameters</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.99</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">])</span>
        <span class="n">optimised_scaling</span> <span class="o">=</span> <span class="n">dual_annealing</span><span class="p">(</span>
            <span class="n">objective_fun</span><span class="p">,</span>
            <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span>
            <span class="n">maxiter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
            <span class="n">x0</span><span class="o">=</span><span class="n">guess_parameters</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">opt_bike_sfx</span><span class="p">,</span> <span class="n">opt_bike_sfy</span><span class="p">,</span> <span class="n">opt_rider_sfx</span><span class="p">,</span> <span class="n">opt_rider_sfy</span> <span class="o">=</span> <span class="n">optimised_scaling</span><span class="o">.</span><span class="n">x</span>  <span class="c1"># optimised scaling factors</span>

        <span class="c1"># Adjust the initial bike shapes based on the optimized scaling factors</span>
        <span class="n">adjusted_shapes</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;bike&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">rectangle</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">YOUNG_MODULUS_RECTANGLE_INIT</span><span class="p">,</span>
                <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">Polygon</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">(</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;min_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_bike_sfx</span><span class="p">,</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;min_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_bike_sfy</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="p">(</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;min_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_bike_sfx</span><span class="p">,</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;max_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_bike_sfy</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="p">(</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;max_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_bike_sfx</span><span class="p">,</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;max_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_bike_sfy</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="p">(</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;max_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_bike_sfx</span><span class="p">,</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;bike&quot;</span><span class="p">][</span><span class="s2">&quot;min_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_bike_sfy</span><span class="p">,</span>
                        <span class="p">),</span>
                    <span class="p">]</span>
                <span class="p">),</span>
            <span class="p">},</span>
            <span class="s2">&quot;rider&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;shape_type&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">ShapeTypes</span><span class="o">.</span><span class="n">rectangle</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="s2">&quot;young_modulus&quot;</span><span class="p">:</span> <span class="n">cst</span><span class="o">.</span><span class="n">YOUNG_MODULUS_RECTANGLE_INIT</span><span class="p">,</span>
                <span class="s2">&quot;object&quot;</span><span class="p">:</span> <span class="n">Polygon</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">(</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;min_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_rider_sfx</span><span class="p">,</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;min_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_rider_sfy</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="p">(</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;min_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_rider_sfx</span><span class="p">,</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;max_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_rider_sfy</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="p">(</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;max_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_rider_sfx</span><span class="p">,</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;max_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_rider_sfy</span><span class="p">,</span>
                        <span class="p">),</span>
                        <span class="p">(</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;max_x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_rider_sfx</span><span class="p">,</span>
                            <span class="n">init_bike</span><span class="o">.</span><span class="n">shapes2D</span><span class="p">[</span><span class="s2">&quot;rider&quot;</span><span class="p">][</span><span class="s2">&quot;min_y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">opt_rider_sfy</span><span class="p">,</span>
                        <span class="p">),</span>
                    <span class="p">]</span>
                <span class="p">),</span>
            <span class="p">},</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shapes</span> <span class="o">=</span> <span class="n">adjusted_shapes</span></div>


<div class="viewcode-block" id="Shapes2D.get_geometric_shape">
<a class="viewcode-back" href="../../../shapes.classes.html#shapes.classes.shapes2D.Shapes2D.get_geometric_shape">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_geometric_shape</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Polygon</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the union geometry of the stored shapes.</span>

<span class="sd">        This method computes the geometric union of all shapes stored in the</span>
<span class="sd">        instance and returns it as a single Polygon object.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        Polygon</span>
<span class="sd">            The union of all stored shapes as a single Polygon object.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">unary_union</span><span class="p">([</span><span class="n">shape</span><span class="p">[</span><span class="s2">&quot;object&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">shape</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">shapes</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span></div>


<div class="viewcode-block" id="Shapes2D.get_area">
<a class="viewcode-back" href="../../../shapes.classes.html#shapes.classes.shapes2D.Shapes2D.get_area">[docs]</a>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_area</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Calculate the area of the agent 2D representation.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        float</span>
<span class="sd">            The area of the agent 2D representation (cm²).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_geometric_shape</span><span class="p">()</span><span class="o">.</span><span class="n">area</span><span class="p">)</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Oscar Maxime Alexandre.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>